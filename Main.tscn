[gd_scene load_steps=17 format=2]

[ext_resource path="res://assets/ui/grid.png" type="Texture" id=1]
[ext_resource path="res://units/Unit.tscn" type="PackedScene" id=2]
[ext_resource path="res://units/Enemy.tscn" type="PackedScene" id=3]
[ext_resource path="res://board/Board.gd" type="Script" id=4]
[ext_resource path="res://board/Cell.tscn" type="PackedScene" id=5]
[ext_resource path="res://assets/ui/yellow_bar_progress.png" type="Texture" id=6]
[ext_resource path="res://board/Attacker.tscn" type="PackedScene" id=7]
[ext_resource path="res://board/Grid.gd" type="Script" id=8]
[ext_resource path="res://board/Pincerer.gd" type="Script" id=9]
[ext_resource path="res://board/PincerExecutor.gd" type="Script" id=10]
[ext_resource path="res://assets/ui/hp_bar_bg.png" type="Texture" id=11]
[ext_resource path="res://board/BoardUI.gd" type="Script" id=12]
[ext_resource path="res://ui/VictoryScreen.tscn" type="PackedScene" id=13]
[ext_resource path="res://ui/DefeatScreen.tscn" type="PackedScene" id=14]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 324, 8 )

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 12, 399 )

[node name="BoardUI" type="MarginContainer"]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
size_flags_horizontal = 4
size_flags_vertical = 4
script = ExtResource( 12 )
__meta__ = {
"_edit_lock_": true
}

[node name="ColorRect" type="ColorRect" parent="."]
margin_right = 720.0
margin_bottom = 960.0
mouse_filter = 2
color = Color( 0.372549, 0.0470588, 0.0470588, 1 )

[node name="Board" type="Node2D" parent="."]
position = Vector2( 56, 125 )
script = ExtResource( 4 )

[node name="Grid" type="Node2D" parent="Board"]
position = Vector2( -56, -240 )
script = ExtResource( 8 )
__meta__ = {
"_edit_lock_": true
}
cell_packed_scene = ExtResource( 5 )

[node name="Sprite" type="Sprite" parent="Board/Grid"]
position = Vector2( 55, 239 )
texture = ExtResource( 1 )
centered = false
__meta__ = {
"_edit_lock_": true
}

[node name="Cells" type="Node2D" parent="Board/Grid"]
position = Vector2( 56, 240 )
__meta__ = {
"_edit_lock_": true
}

[node name="Pincerer" type="Node" parent="Board"]
script = ExtResource( 9 )

[node name="DragTimer" type="Timer" parent="Board"]
wait_time = 4.0
one_shot = true

[node name="UpperBounds" type="StaticBody2D" parent="Board"]
position = Vector2( 301, -8 )
collision_mask = 0
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="Board/UpperBounds"]
shape = SubResource( 1 )
__meta__ = {
"_edit_lock_": true
}

[node name="LowerBounds" type="StaticBody2D" parent="Board"]
position = Vector2( 301, 810 )
collision_mask = 0
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="Board/LowerBounds"]
shape = SubResource( 1 )
__meta__ = {
"_edit_lock_": true
}

[node name="RightBounds" type="StaticBody2D" parent="Board"]
position = Vector2( 614, 401 )
collision_mask = 0
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="Board/RightBounds"]
shape = SubResource( 2 )
__meta__ = {
"_edit_lock_": true
}

[node name="LeftBounds" type="StaticBody2D" parent="Board"]
position = Vector2( -12, 401 )
collision_mask = 0
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="Board/LeftBounds"]
shape = SubResource( 2 )
__meta__ = {
"_edit_lock_": true
}

[node name="Enemies" type="Node2D" parent="Board"]
__meta__ = {
"_edit_lock_": true
}

[node name="Enemy" parent="Board/Enemies" instance=ExtResource( 3 )]
position = Vector2( 248, 347 )
is_controlled_by_player = true

[node name="Units" type="Node2D" parent="Board"]
__meta__ = {
"_edit_lock_": true
}

[node name="Unit" parent="Board/Units" instance=ExtResource( 2 )]
position = Vector2( 149, 348 )

[node name="Unit2" parent="Board/Units" instance=ExtResource( 2 )]
position = Vector2( 248, 456 )

[node name="DebugUnits" type="Node2D" parent="Board"]
visible = false
__meta__ = {
"_edit_lock_": true
}

[node name="Unit" parent="Board/DebugUnits" instance=ExtResource( 2 )]
position = Vector2( 144, 48 )

[node name="Unit2" parent="Board/DebugUnits" instance=ExtResource( 2 )]
position = Vector2( 344, 251 )

[node name="Unit3" parent="Board/DebugUnits" instance=ExtResource( 2 )]
position = Vector2( 256, 459 )

[node name="Attacker" parent="Board" instance=ExtResource( 7 )]
__meta__ = {
"_edit_lock_": true
}

[node name="PincerExecutor" type="Node2D" parent="Board"]
script = ExtResource( 10 )
__meta__ = {
"_edit_lock_": true
}

[node name="SkillActivationTimer" type="Timer" parent="Board/PincerExecutor"]
wait_time = 0.25

[node name="DeathAnimationTimer" type="Timer" parent="Board/PincerExecutor"]
wait_time = 0.5

[node name="Tween" type="Tween" parent="Board"]

[node name="MarginContainer" type="MarginContainer" parent="."]
margin_right = 720.0
margin_bottom = 46.0
mouse_filter = 2
size_flags_vertical = 0
custom_constants/margin_right = 20
custom_constants/margin_top = 20
custom_constants/margin_left = 20
custom_constants/margin_bottom = 20

[node name="VBoxContainer" type="VBoxContainer" parent="MarginContainer"]
margin_left = 20.0
margin_top = 20.0
margin_right = 700.0
margin_bottom = 26.0
mouse_filter = 2

[node name="TextureProgress" type="TextureProgress" parent="MarginContainer/VBoxContainer"]
margin_right = 200.0
margin_bottom = 6.0
rect_min_size = Vector2( 200, 0 )
mouse_filter = 2
size_flags_horizontal = 0
value = 50.0
texture_under = ExtResource( 11 )
texture_progress = ExtResource( 6 )
nine_patch_stretch = true
stretch_margin_left = 5
stretch_margin_top = 3
stretch_margin_right = 5
stretch_margin_bottom = 3

[node name="Tween" type="Tween" parent="MarginContainer/VBoxContainer/TextureProgress"]

[node name="GameOverScreen" type="MarginContainer" parent="."]
visible = false
margin_right = 720.0
margin_bottom = 960.0

[node name="DefeatScreen" parent="." instance=ExtResource( 14 )]
visible = false
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 720.0
margin_bottom = 960.0

[node name="VictoryScreen" parent="." instance=ExtResource( 13 )]
visible = false
anchor_right = 0.0
anchor_bottom = 0.0
margin_right = 720.0
margin_bottom = 960.0

[connection signal="defeat" from="Board" to="." method="_on_Board_defeat"]
[connection signal="drag_timer_reset" from="Board" to="." method="_on_Board_drag_timer_reset"]
[connection signal="drag_timer_started" from="Board" to="." method="_on_Board_drag_timer_started"]
[connection signal="drag_timer_stopped" from="Board" to="." method="_on_Board_drag_timer_stopped"]
[connection signal="player_turn_started" from="Board" to="." method="_on_Board_player_turn_started"]
[connection signal="victory" from="Board" to="." method="_on_Board_victory"]
[connection signal="timeout" from="Board/DragTimer" to="Board" method="_on_DragTimer_timeout"]
[connection signal="pincer_executed" from="Board/PincerExecutor" to="Board" method="_on_PincerExecutor_pincer_executed"]
[connection signal="tree_exiting" from="Board/PincerExecutor" to="Board/PincerExecutor" method="_on_PincerExecutor_tree_exiting"]
[connection signal="timeout" from="Board/PincerExecutor/SkillActivationTimer" to="Board/PincerExecutor" method="_on_SkillActivationTimer_timeout"]
[connection signal="timeout" from="Board/PincerExecutor/DeathAnimationTimer" to="Board/PincerExecutor" method="_on_DeathAnimationTimer_timeout"]
[connection signal="quit_button_pressed" from="DefeatScreen" to="." method="_on_DefeatScreen_quit_button_pressed"]
[connection signal="try_again_button_pressed" from="DefeatScreen" to="." method="_on_DefeatScreen_try_again_button_pressed"]
[connection signal="continue_button_pressed" from="VictoryScreen" to="." method="_on_VictoryScreen_continue_button_pressed"]
